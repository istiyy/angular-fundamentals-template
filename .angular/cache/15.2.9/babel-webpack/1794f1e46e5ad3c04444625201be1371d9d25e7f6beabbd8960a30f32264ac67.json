{"ast":null,"code":"import { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/auth/services/auth.service\";\nimport * as i2 from \"@app/user/services/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../button/button.component\";\nfunction HeaderComponent_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.userName);\n  }\n}\nfunction HeaderComponent_app_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-button\", 6);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_app_button_5_Template_app_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onLogout());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction HeaderComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-button\", 7);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_ng_template_6_Template_app_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onLogin());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = [\"*\"];\nexport class HeaderComponent {\n  constructor(authService, userService, router) {\n    this.authService = authService;\n    this.userService = userService;\n    this.router = router;\n    this.isLoggedIn = false;\n    this.userName = null;\n    this.authService.isAuthorized$.subscribe(isAuthorised$ => {\n      this.isLoggedIn = isAuthorised$;\n      if (this.isLoggedIn) {\n        this.fetchUserName();\n      } else {\n        this.userName = null;\n      }\n    });\n  }\n  fetchUserName() {\n    this.userService.getUser().pipe(tap(response => {\n      if (response && response.result.name === null) {\n        this.userName = 'Admin';\n      } else {\n        this.userName = response.result.name;\n      }\n    })).subscribe({\n      error: err => {\n        console.error('Failed to fetch user details:', err);\n        this.userName = null;\n      }\n    });\n  }\n  onLogout() {\n    this.authService.logout();\n    this.router.navigate(['/login']);\n  }\n  onLogin() {\n    this.router.navigate(['/login']);\n    console.log(this.userService.getUser());\n  }\n}\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router));\n};\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"app-header\"]],\n  ngContentSelectors: _c0,\n  decls: 8,\n  vars: 3,\n  consts: [[1, \"app-header\"], [\"alt\", \"logo\", \"src\", \"assets/logo.svg\"], [1, \"app-header-account-details\"], [4, \"ngIf\"], [\"buttonText\", \"Logout\", 3, \"click\", 4, \"ngIf\", \"ngIfElse\"], [\"loginButton\", \"\"], [\"buttonText\", \"Logout\", 3, \"click\"], [\"buttonText\", \"Login\", 3, \"click\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵprojectionDef();\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵprojection(2);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, HeaderComponent_p_4_Template, 2, 1, \"p\", 3);\n      i0.ɵɵtemplate(5, HeaderComponent_app_button_5_Template, 1, 0, \"app-button\", 4);\n      i0.ɵɵtemplate(6, HeaderComponent_ng_template_6_Template, 1, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(7);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn)(\"ngIfElse\", _r2);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ButtonComponent],\n  styles: [\".app-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  height: 80px;\\n  padding: 0 30px;\\n  background-color: #FFF;\\n  box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.15);\\n}\\n.app-header-account-details[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 2rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL3N0eWxlcy92YXJpYWJsZXMvY29sb3JzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFDSSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0Esc0JDUlU7RURTViwyQ0FBQTtBQURKO0FBR0k7RUFDSSxhQUFBO0VBQ0EsU0FBQTtBQURSIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCBcInNyYy9hcHAvc2hhcmVkL3N0eWxlcy92YXJpYWJsZXMvY29sb3JzXCI7XG5cbi5hcHAtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGhlaWdodDogODBweDtcbiAgICBwYWRkaW5nOiAwIDMwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGNvbG9yLXdoaXRlO1xuICAgIGJveC1zaGFkb3c6IDFweCAxcHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgXG4gICAgJi1hY2NvdW50LWRldGFpbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDJyZW07XG4gICAgfVxufVxuIiwiJGNvbG9yLXdoaXRlOiAjRkZGO1xuJGNvbG9yLWdyYXk6ICNDRkNGQ0Y7XG4kY29sb3ItcmVkOiAjRkYwMDAwO1xuJGNvbG9yLWRhcmstZ3JheTogIzMzM0U0ODtcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AAIA,SAASA,GAAG,QAAQ,MAAM;;;;;;;;;ICAtBC,yBAAsB;IAAAA,YAAc;IAAAA,iBAAI;;;;IAAlBA,eAAc;IAAdA,qCAAc;;;;;;IACpCA,qCAA0F;IAArBA;MAAAA;MAAA;MAAA,OAASA,gCAAU;IAAA,EAAC;IAACA,iBAAa;;;;;;IAErGA,qCAAmD;IAApBA;MAAAA;MAAA;MAAA,OAASA,+BAAS;IAAA,EAAC;IAACA,iBAAa;;;;ADItE,OAAM,MAAOC,eAAe;EAK1BC,YAAsBC,WAAwB,EAAUC,WAAwB,EAAUC,MAAc;IAAlF,gBAAW,GAAXF,WAAW;IAAuB,gBAAW,GAAXC,WAAW;IAAuB,WAAM,GAANC,MAAM;IAHhG,eAAU,GAAG,KAAK;IAClB,aAAQ,GAAkB,IAAI;IAG5B,IAAI,CAACF,WAAW,CAACG,aAAa,CAACC,SAAS,CAAEC,aAAa,IAAI;MACzD,IAAI,CAACC,UAAU,GAAGD,aAAa;MAE/B,IAAI,IAAI,CAACC,UAAU,EAAE;QACnB,IAAI,CAACC,aAAa,EAAE;OACrB,MAAM;QACL,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAExB,CAAC,CAAC;EACJ;EAEAD,aAAa;IACX,IAAI,CAACN,WAAW,CAACQ,OAAO,EAAE,CAACC,IAAI,CAC7Bd,GAAG,CAAEe,QAAa,IAAI;MAEpB,IAAGA,QAAQ,IAAIA,QAAQ,CAACC,MAAM,CAACC,IAAI,KAAK,IAAI,EAAC;QAC3C,IAAI,CAACL,QAAQ,GAAG,OAAO;OACxB,MAAM;QACP,IAAI,CAACA,QAAQ,GAAGG,QAAQ,CAACC,MAAM,CAACC,IAAI;;IAEtC,CAAC,CAAC,CACH,CAACT,SAAS,CAAC;MACVU,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,+BAA+B,EAAEC,GAAG,CAAC;QACnD,IAAI,CAACP,QAAQ,GAAG,IAAI;MACtB;KACD,CAAC;EACJ;EAEAS,QAAQ;IACN,IAAI,CAACjB,WAAW,CAACkB,MAAM,EAAE;IACzB,IAAI,CAAChB,MAAM,CAACiB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAC,OAAO;IACL,IAAI,CAAClB,MAAM,CAACiB,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAChCH,OAAO,CAACK,GAAG,CAAC,IAAI,CAACpB,WAAW,CAACQ,OAAO,EAAE,CAAC;EACzC;;AA3CWX,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;QAAfA,eAAe;EAAAwB;EAAAC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCX5B9B,8BAAwB;MACtBA,yBAAsC;MACtCA,kBAAyB;MACzBA,8BAAwC;MACtCA,4DAAwC;MACxCA,8EAAuG;MACvGA,iHAEc;MAChBA,iBAAM;;;;MALAA,eAAgB;MAAhBA,qCAAgB;MACPA,eAAkB;MAAlBA,qCAAkB","names":["tap","i0","HeaderComponent","constructor","authService","userService","router","isAuthorized$","subscribe","isAuthorised$","isLoggedIn","fetchUserName","userName","getUser","pipe","response","result","name","error","err","console","onLogout","logout","navigate","onLogin","log","selectors","ngContentSelectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Isti\\Desktop\\epam-tasks\\angular-fundamentals-template\\src\\app\\shared\\components\\header\\header.component.ts","C:\\Users\\Isti\\Desktop\\epam-tasks\\angular-fundamentals-template\\src\\app\\shared\\components\\header\\header.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AuthService } from '@app/auth/services/auth.service';\nimport { UserService } from '@app/user/services/user.service';\nimport { Router } from '@angular/router';\nimport { tap } from 'rxjs';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent{\n\n  isLoggedIn = false;\n  userName: string | null = null;\n\n  constructor ( private authService: AuthService, private userService: UserService, private router: Router ) {\n    this.authService.isAuthorized$.subscribe((isAuthorised$) => {\n      this.isLoggedIn = isAuthorised$;\n\n      if (this.isLoggedIn) {\n        this.fetchUserName();\n      } else {\n        this.userName = null;\n      }\n    });\n  }\n\n  fetchUserName(): void {\n    this.userService.getUser().pipe(\n      tap((response: any) => {\n\n        if(response && response.result.name === null){\n          this.userName = 'Admin'\n        } else {\n        this.userName = response.result.name;\n        }\n      })\n    ).subscribe({\n      error: (err) => {\n        console.error('Failed to fetch user details:', err);\n        this.userName = null;\n      }\n    });\n  }\n\n  onLogout(): void {\n    this.authService.logout();\n    this.router.navigate(['/login']);\n  }\n\n  onLogin(): void {\n    this.router.navigate(['/login']);\n    console.log(this.userService.getUser())    \n  }\n}\n","<div class=\"app-header\">\n  <img alt=\"logo\" src=\"assets/logo.svg\">\n  <ng-content></ng-content>\n  <div class=\"app-header-account-details\">\n    <p *ngIf=\"isLoggedIn\">{{ userName }}</p>\n    <app-button *ngIf=\"isLoggedIn; else loginButton\" buttonText=\"Logout\" (click)=\"onLogout()\"></app-button>\n    <ng-template #loginButton>\n      <app-button buttonText=\"Login\" (click)=\"onLogin()\"></app-button>\n    </ng-template>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}