{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@fortawesome/angular-fontawesome\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@app/services/courses.service\";\nimport * as i5 from \"@app/store/courses/courses.facade\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../button/button.component\";\nimport * as i8 from \"../../pipes/duration.pipe\";\nfunction CourseFormComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Title is required and must be at least 2 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"Description is required and must be at least 2 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵtext(1, \"Duration is required and must be greater than 0.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CourseFormComponent_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1, \"New author should contain at least 2 characters and only Latin letters or numbers.\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"fas\", \"plus\"];\n};\nfunction CourseFormComponent_li_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"app-button\", 29);\n    i0.ɵɵlistener(\"click\", function CourseFormComponent_li_39_Template_app_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const author_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.addAuthorToCourse(author_r7));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const author_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", author_r7.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"iconName\", i0.ɵɵpureFunction0(2, _c0));\n  }\n}\nconst _c1 = function () {\n  return [\"fas\", \"trash-can\"];\n};\nfunction CourseFormComponent_li_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"app-button\", 29);\n    i0.ɵɵlistener(\"click\", function CourseFormComponent_li_44_Template_app_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const i_r11 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.removeAuthorFromCourse(i_r11));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const author_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", author_r10.value.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"iconName\", i0.ɵɵpureFunction0(2, _c1));\n  }\n}\nfunction CourseFormComponent_p_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Author list is empty\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CourseFormComponent {\n  constructor(fb, library, route, router, coursesService, coursesFacade) {\n    this.fb = fb;\n    this.library = library;\n    this.route = route;\n    this.router = router;\n    this.coursesService = coursesService;\n    this.coursesFacade = coursesFacade;\n    this.availableAuthors = [];\n    this.authorIdCounter = 1;\n    this.courseId = null;\n    this.buttonText = 'Create Course';\n    library.addIconPacks(fas);\n    this.courseForm = this.fb.group({\n      title: ['', [Validators.required, Validators.minLength(2)]],\n      description: ['', [Validators.required, Validators.minLength(2)]],\n      duration: [0, [Validators.required, Validators.min(0)]],\n      authors: this.fb.array([]),\n      author: ['', [Validators.minLength(2), Validators.pattern('^[a-zA-Z0-9]*$')]]\n    });\n  }\n  ngOnInit() {\n    this.coursesService.getAllAuthors().subscribe(authors => {\n      this.availableAuthors = authors.result;\n    }, error => {\n      console.error('Error loading authors:', error);\n    });\n    this.route.paramMap.subscribe(params => {\n      this.courseId = params.get('id');\n      if (this.courseId) {\n        this.loadCourseData(this.courseId);\n        this.buttonText = 'Edit Course';\n      }\n    });\n  }\n  loadCourseData(courseId) {\n    this.coursesFacade.course$.subscribe(course => {\n      if (course) {\n        this.courseForm.patchValue({\n          title: course.title,\n          description: course.description,\n          duration: course.duration\n        });\n        this.authors.clear();\n        this.coursesService.getAllAuthors().subscribe(allAuthors => {\n          this.availableAuthors = allAuthors.result;\n          course.authors.forEach(authorId => {\n            const author = allAuthors.result.find(a => a.id === authorId);\n            if (author) {\n              this.addAuthorToCourse(author);\n            }\n          });\n        });\n      }\n    });\n    this.coursesFacade.getSingleCourse(courseId);\n  }\n  generateAuthorId() {\n    return `author-${this.authorIdCounter++}`;\n  }\n  get authors() {\n    return this.courseForm.get('authors');\n  }\n  addAuthorToCourse(author) {\n    this.authors.push(new FormControl({\n      id: author.id,\n      name: author.name\n    }));\n    this.availableAuthors = this.availableAuthors.filter(a => a.id !== author.id);\n  }\n  removeAuthorFromCourse(index) {\n    const removedAuthor = this.authors.at(index).value;\n    this.availableAuthors.push(removedAuthor);\n    this.authors.removeAt(index);\n  }\n  createAuthor() {\n    const authorName = this.courseForm.get('author')?.value;\n    if (authorName) {\n      this.coursesService.createAuthor(authorName).subscribe(response => {\n        const newAuthor = {\n          id: response.id,\n          name: authorName\n        };\n        this.availableAuthors.push(newAuthor);\n        this.courseForm.get('author')?.reset();\n      }, error => {\n        console.error('Error creating author:', error);\n      });\n    }\n  }\n  onSubmit() {\n    if (this.courseForm.valid) {\n      const formData = {\n        ...this.courseForm.value\n      };\n      if (formData.authors && Array.isArray(formData.authors)) {\n        formData.authors = formData.authors.map(author => author.id);\n        if (this.courseId) {\n          this.coursesFacade.editCourse(this.courseId, formData);\n          this.coursesFacade.courses$.subscribe(courses => {\n            const updatedCourse = courses.find(course => course.id === this.courseId);\n            if (updatedCourse) {\n              this.router.navigate(['/courses']);\n            }\n          });\n        } else {\n          this.coursesFacade.createCourse(formData);\n          this.coursesFacade.courses$.subscribe(courses => {\n            if (courses.length > 0) {\n              this.router.navigate(['/courses']);\n            }\n          });\n        }\n      } else {\n        this.courseForm.markAllAsTouched();\n      }\n    }\n  }\n}\nCourseFormComponent.ɵfac = function CourseFormComponent_Factory(t) {\n  return new (t || CourseFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.FaIconLibrary), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.CoursesService), i0.ɵɵdirectiveInject(i5.CoursesStateFacade));\n};\nCourseFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CourseFormComponent,\n  selectors: [[\"app-course-form\"]],\n  decls: 49,\n  vars: 12,\n  consts: [[3, \"formGroup\"], [1, \"app-plate\"], [1, \"course\"], [1, \"form__control\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"placeholder\", \"Input text\", \"formControlName\", \"title\"], [\"id\", \"titleErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"placeholder\", \"Input text\", \"rows\", \"4\", \"cols\", \"5\", \"formControlName\", \"description\"], [\"id\", \"descriptionErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [1, \"separator\"], [1, \"course__flex\"], [\"type\", \"number\", \"id\", \"duration\", \"placeholder\", \"Input duration\", \"formControlName\", \"duration\"], [1, \"course__duration\"], [\"id\", \"durationErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [\"type\", \"text\", \"id\", \"author\", \"placeholder\", \"Input Author Name\", \"formControlName\", \"author\"], [\"id\", \"createAuthor\", \"buttonText\", \"Create author\", 3, \"click\"], [\"id\", \"authorErrorMessage\", \"class\", \"text-danger\", 4, \"ngIf\"], [1, \"available__authors\"], [4, \"ngFor\", \"ngForOf\"], [1, \"course__authors\"], [4, \"ngIf\"], [1, \"form__action\", \"course-form__buttons\"], [\"buttonText\", \"cancel\", \"routerLink\", \"/courses\"], [3, \"buttonText\", \"click\"], [\"id\", \"titleErrorMessage\", 1, \"text-danger\"], [\"id\", \"descriptionErrorMessage\", 1, \"text-danger\"], [\"id\", \"durationErrorMessage\", 1, \"text-danger\"], [\"id\", \"authorErrorMessage\", 1, \"text-danger\"], [3, \"iconName\", \"click\"]],\n  template: function CourseFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Create / Edit Course\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0)(3, \"div\", 1)(4, \"div\", 2)(5, \"h3\");\n      i0.ɵɵtext(6, \"Main Info\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 3)(8, \"label\", 4);\n      i0.ɵɵtext(9, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(10, \"input\", 5);\n      i0.ɵɵtemplate(11, CourseFormComponent_span_11_Template, 2, 0, \"span\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 3)(13, \"label\", 7);\n      i0.ɵɵtext(14, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"textarea\", 8);\n      i0.ɵɵtemplate(16, CourseFormComponent_span_16_Template, 2, 0, \"span\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"div\", 10);\n      i0.ɵɵelementStart(18, \"h3\");\n      i0.ɵɵtext(19, \"Duration\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 3)(21, \"div\", 11);\n      i0.ɵɵelement(22, \"input\", 12);\n      i0.ɵɵelementStart(23, \"div\", 13);\n      i0.ɵɵtext(24);\n      i0.ɵɵpipe(25, \"duration\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(26, CourseFormComponent_span_26_Template, 2, 0, \"span\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"div\", 10);\n      i0.ɵɵelementStart(28, \"h3\");\n      i0.ɵɵtext(29, \"Authors\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 3)(31, \"div\", 11);\n      i0.ɵɵelement(32, \"input\", 15);\n      i0.ɵɵelementStart(33, \"app-button\", 16);\n      i0.ɵɵlistener(\"click\", function CourseFormComponent_Template_app_button_click_33_listener() {\n        return ctx.createAuthor();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(34, CourseFormComponent_span_34_Template, 2, 0, \"span\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"div\", 18)(36, \"h4\");\n      i0.ɵɵtext(37, \"Authors List\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"ul\");\n      i0.ɵɵtemplate(39, CourseFormComponent_li_39_Template, 3, 3, \"li\", 19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(40, \"div\", 20)(41, \"h4\");\n      i0.ɵɵtext(42, \"Course Authors:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"ul\");\n      i0.ɵɵtemplate(44, CourseFormComponent_li_44_Template, 3, 3, \"li\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(45, CourseFormComponent_p_45_Template, 2, 0, \"p\", 21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"div\", 22);\n      i0.ɵɵelement(47, \"app-button\", 23);\n      i0.ɵɵelementStart(48, \"app-button\", 24);\n      i0.ɵɵlistener(\"click\", function CourseFormComponent_Template_app_button_click_48_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      let tmp_3_0;\n      let tmp_4_0;\n      let tmp_5_0;\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.courseForm);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.courseForm.get(\"title\")) == null ? null : tmp_1_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.courseForm.get(\"description\")) == null ? null : tmp_2_0.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(25, 10, (tmp_3_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_3_0.value), \" hours \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx.courseForm.get(\"duration\")) == null ? null : tmp_4_0.touched));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.courseForm.get(\"author\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx.courseForm.get(\"author\")) == null ? null : tmp_5_0.touched));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.availableAuthors);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.authors.controls);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.authors.length === 0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"buttonText\", ctx.buttonText);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.RouterLink, i7.ButtonComponent, i8.DurationPipe],\n  styles: [\".app-plate[_ngcontent-%COMP%] {\\n  width: 100%;\\n  min-height: 477px;\\n  background-color: #fff;\\n  border: 1px solid #CFCFCF;\\n  border-radius: 4px;\\n  padding: 32px;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.text-align-center[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n.app-error-text[_ngcontent-%COMP%] {\\n  color: #FF0000;\\n  position: absolute;\\n  margin-top: 4px;\\n}\\n\\n.form__control[_ngcontent-%COMP%] {\\n  margin-bottom: 24px;\\n}\\n.form__action[_ngcontent-%COMP%] {\\n  margin-top: 54px;\\n}\\n.form__text[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-top: 38px;\\n  flex-wrap: wrap;\\n}\\n\\n.separator[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-bottom: 1px solid #CFCFCF;\\n}\\n\\n.text-danger[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n.link-strong[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: #333E48;\\n}\\n\\n.password-input-container[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  padding-right: 50px;\\n}\\n\\n.toggle-password[_ngcontent-%COMP%] {\\n  position: absolute;\\n  right: 10px;\\n  background: none;\\n  border: none;\\n  cursor: pointer;\\n  outline: none;\\n}\\n\\n.course[_ngcontent-%COMP%] {\\n  min-width: 60vw;\\n}\\n.course__flex[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: baseline;\\n}\\n.course__flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  flex: 1;\\n}\\n.course__flex[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%] {\\n  margin-left: 16px;\\n}\\n.course__flex[_ngcontent-%COMP%]   .course__duration[_ngcontent-%COMP%] {\\n  margin-left: 16px;\\n}\\n.course__authors[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n}\\n.course__authors-item[_ngcontent-%COMP%] {\\n  margin-right: 10px;\\n}\\n.course__icon[_ngcontent-%COMP%] {\\n  margin-left: 4px;\\n  cursor: pointer;\\n}\\n\\n.course-form__buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 1rem;\\n  justify-content: flex-end;\\n}\\n\\n.available__authors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  padding: 0;\\n}\\n.available__authors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  display: flex;\\n  list-style-type: none;\\n  gap: 1rem;\\n  align-items: center;\\n}\\n\\n.course__authors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  padding: 0;\\n}\\n.course__authors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  display: flex;\\n  list-style-type: none;\\n  gap: 1rem;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvY291cnNlLWZvcm0vY291cnNlLWZvcm0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUE7RUFDSSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSxzQkFQVTtFQVFWLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FDSEo7O0FETUE7RUFDSSxrQkFBQTtBQ0hKOztBRE1BO0VBQ0ksY0FsQlE7RUFtQlIsa0JBQUE7RUFDQSxlQUFBO0FDSEo7O0FET0k7RUFDSSxtQkFBQTtBQ0pSO0FET0k7RUFDSSxnQkFBQTtBQ0xSO0FEUUk7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0YsZUFBQTtBQ05OOztBRFVBO0VBQ0ksV0FBQTtFQUNBLGdDQUFBO0FDUEo7O0FEVUE7RUFDSSxVQUFBO0FDUEo7O0FEVUE7RUFDSSxxQkFBQTtFQUNBLGNBQUE7QUNQSjs7QURXQTtFQUNJLGtCQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0FDUko7O0FEV0U7RUFDRSxtQkFBQTtBQ1JKOztBRFdFO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLGFBQUE7QUNSSjs7QUE5REE7RUFDQyxlQUFBO0FBaUVEO0FBL0RFO0VBQ0UsYUFBQTtFQUNBLDhCQUFBO0VBQ0EscUJBQUE7QUFpRUo7QUEvREk7RUFDRSxPQUFBO0FBaUVOO0FBOURJO0VBQ0UsaUJBQUE7QUFnRU47QUE3REk7RUFDRSxpQkFBQTtBQStETjtBQTNERTtFQUNFLGVBQUE7QUE2REo7QUEzREk7RUFDRSxrQkFBQTtBQTZETjtBQXpERTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtBQTJESjs7QUF2REE7RUFDRSxhQUFBO0VBQ0EsU0FBQTtFQUNBLHlCQUFBO0FBMERGOztBQXRERTtFQUNFLFVBQUE7QUF5REo7QUF4REk7RUFDRSxhQUFBO0VBQ0EscUJBQUE7RUFDQSxTQUFBO0VBQ0EsbUJBQUE7QUEwRE47O0FBcERFO0VBQ0UsVUFBQTtBQXVESjtBQXRESTtFQUNFLGFBQUE7RUFDQSxxQkFBQTtFQUNBLFNBQUE7RUFDQSxtQkFBQTtBQXdETiIsInNvdXJjZXNDb250ZW50IjpbIiRjb2xvci13aGl0ZTogI2ZmZjtcbiRjb2xvci1ncmF5OiAjQ0ZDRkNGO1xuJGNvbG9yLXJlZDogI0ZGMDAwMDtcblxuLmFwcC1wbGF0ZSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWluLWhlaWdodDogNDc3cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGNvbG9yLXdoaXRlO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICRjb2xvci1ncmF5O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBwYWRkaW5nOiAzMnB4O1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50ZXh0LWFsaWduLWNlbnRlciB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uYXBwLWVycm9yLXRleHQge1xuICAgIGNvbG9yOiAkY29sb3ItcmVkO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG59XG5cbi5mb3JtIHtcbiAgICAmX19jb250cm9sIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgICB9XG5cbiAgICAmX19hY3Rpb24ge1xuICAgICAgICBtYXJnaW4tdG9wOiA1NHB4O1xuICAgIH1cblxuICAgICZfX3RleHQge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDM4cHg7XG4gICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgfVxufVxuXG4uc2VwYXJhdG9yIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJGNvbG9yLWdyYXk7XG59XG5cbi50ZXh0LWRhbmdlciB7XG4gICAgY29sb3I6IHJlZDtcbn1cblxuLmxpbmstc3Ryb25nIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgY29sb3I6ICMzMzNFNDg7XG59XG5cblxuLnBhc3N3b3JkLWlucHV0LWNvbnRhaW5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuICBcbiAgLnBhc3N3b3JkLWlucHV0LWNvbnRhaW5lciBpbnB1dCB7XG4gICAgcGFkZGluZy1yaWdodDogNTBweDsgXG4gIH1cbiAgXG4gIC50b2dnbGUtcGFzc3dvcmQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMTBweDsgXG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH0iLCJAaW1wb3J0ICdzcmMvYXBwL3NoYXJlZC9zdHlsZXMvc3R5bGVzJztcblxuLmNvdXJzZSB7XG4gbWluLXdpZHRoOiA2MHZ3O1xuXG4gICZfX2ZsZXgge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcblxuICAgICYgaW5wdXQge1xuICAgICAgZmxleDogMTtcbiAgICB9XG5cbiAgICAmIGFwcC1idXR0b24ge1xuICAgICAgbWFyZ2luLWxlZnQ6IDE2cHg7XG4gICAgfVxuXG4gICAgJiAuY291cnNlX19kdXJhdGlvbiB7XG4gICAgICBtYXJnaW4tbGVmdDogMTZweDtcbiAgICB9XG4gIH1cblxuICAmX19hdXRob3JzIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG5cbiAgICAmLWl0ZW0ge1xuICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgIH1cbiAgfVxuXG4gICZfX2ljb24ge1xuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG59XG5cbi5jb3Vyc2UtZm9ybV9fYnV0dG9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogMXJlbTtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbn1cblxuLmF2YWlsYWJsZV9fYXV0aG9ycyB7XG4gIHVse1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbGl7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICAgICAgZ2FwOiAxcmVtO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG4gIH1cbn1cblxuLmNvdXJzZV9fYXV0aG9ycyB7XG4gIHVse1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbGl7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICAgICAgZ2FwOiAxcmVtO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","fas","i0","CourseFormComponent","constructor","fb","library","route","router","coursesService","coursesFacade","addIconPacks","courseForm","group","title","required","minLength","description","duration","min","authors","array","author","pattern","ngOnInit","getAllAuthors","subscribe","availableAuthors","result","error","console","paramMap","params","courseId","get","loadCourseData","buttonText","course$","course","patchValue","clear","allAuthors","forEach","authorId","find","a","id","addAuthorToCourse","getSingleCourse","generateAuthorId","authorIdCounter","push","name","filter","removeAuthorFromCourse","index","removedAuthor","at","value","removeAt","createAuthor","authorName","response","newAuthor","reset","onSubmit","valid","formData","Array","isArray","map","editCourse","courses$","courses","updatedCourse","navigate","createCourse","length","markAllAsTouched","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Isti\\Desktop\\epam-tasks\\angular-fundamentals-template\\src\\app\\shared\\components\\course-form\\course-form.component.ts","C:\\Users\\Isti\\Desktop\\epam-tasks\\angular-fundamentals-template\\src\\app\\shared\\components\\course-form\\course-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {\n  FormArray,\n  FormBuilder, FormControl, FormGroup,\n  Validators\n} from '@angular/forms';\nimport { FaIconLibrary } from '@fortawesome/angular-fontawesome';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CoursesService } from '@app/services/courses.service';\nimport { CoursesStateFacade } from '@app/store/courses/courses.facade';\n\n\n@Component({\n  selector: 'app-course-form',\n  templateUrl: './course-form.component.html',\n  styleUrls: ['./course-form.component.scss'],\n})\nexport class CourseFormComponent implements OnInit {\n\n  courseForm!: FormGroup;\n  availableAuthors: {id: string, name: string}[]= [];\n  authorIdCounter = 1;\n  courseId: string | null = null;\n  buttonText: string = 'Create Course'\n\n  constructor(public fb: FormBuilder, public library: FaIconLibrary, private route: ActivatedRoute, private router: Router, private coursesService: CoursesService, private coursesFacade: CoursesStateFacade) {\n    library.addIconPacks(fas);\n\n    this.courseForm = this.fb.group({\n      title: ['', [Validators.required, Validators.minLength(2)]],\n      description: ['', [Validators.required, Validators.minLength(2)]],\n      duration: [0, [Validators.required, Validators.min(0)]],\n      authors: this.fb.array([]),\n      author: ['', [Validators.minLength(2), Validators.pattern('^[a-zA-Z0-9]*$')]]\n    });\n  }\n\n  ngOnInit(): void {\n    this.coursesService.getAllAuthors().subscribe(\n      (authors) => {\n          this.availableAuthors = authors.result;\n      },\n      (error) => {\n          console.error('Error loading authors:', error);\n      }\n    );\n\n    this.route.paramMap.subscribe(params => {\n      this.courseId = params.get('id');\n\n      if (this.courseId) {\n        this.loadCourseData(this.courseId)\n        this.buttonText = 'Edit Course'\n      }\n    });\n  }\n\n  private loadCourseData(courseId: string) {\n    this.coursesFacade.course$.subscribe(course => {\n      if (course) {\n        this.courseForm.patchValue({\n          title: course.title,\n          description: course.description,\n          duration: course.duration\n        });\n\n        this.authors.clear();\n\n        this.coursesService.getAllAuthors().subscribe(allAuthors => {\n          this.availableAuthors = allAuthors.result;\n          course.authors.forEach((authorId: string) => {\n            const author = allAuthors.result.find((a: any) => a.id === authorId);\n            if (author) {\n              this.addAuthorToCourse(author);\n            }\n          });\n        });\n      }\n    })\n\n    this.coursesFacade.getSingleCourse(courseId)\n  }\n  \n  generateAuthorId(): string {\n    return `author-${this.authorIdCounter++}`;\n  }\n\n  get authors(): FormArray {\n    return this.courseForm.get('authors') as FormArray\n  }\n\n  addAuthorToCourse(author: {id: string, name: string}): void {\n    this.authors.push(new FormControl ({ id: author.id, name: author.name }));\n    this.availableAuthors = this.availableAuthors.filter(a => a.id !== author.id)\n  }\n\n  removeAuthorFromCourse(index: number): void {\n    const removedAuthor = this.authors.at(index).value;\n    this.availableAuthors.push(removedAuthor);\n    this.authors.removeAt(index)\n  }\n\n  createAuthor(): void {\n    const authorName = this.courseForm.get('author')?.value; \n    if (authorName) {\n\n      this.coursesService.createAuthor(authorName).subscribe(\n        (response: any) => {\n          const newAuthor = { id: response.id, name: authorName };\n          this.availableAuthors.push(newAuthor);\n          this.courseForm.get('author')?.reset();\n        },\n        (error: any) => {\n          console.error('Error creating author:', error);\n        }\n      );\n    }\n  }\n\n  onSubmit() {\n    if (this.courseForm.valid) {\n        const formData = { ...this.courseForm.value };\n        if (formData.authors && Array.isArray(formData.authors)) {\n            formData.authors = formData.authors.map((author: any) => author.id); \n                    \n        if (this.courseId) {\n          this.coursesFacade.editCourse(this.courseId, formData);\n\n          this.coursesFacade.courses$.subscribe(courses => {\n            const updatedCourse = courses.find(course => course.id === this.courseId);\n            if (updatedCourse) {\n              this.router.navigate(['/courses']);\n            }\n          });\n        } else {\n          this.coursesFacade.createCourse(formData);\n\n          this.coursesFacade.courses$.subscribe(courses => {\n            if (courses.length > 0) {\n              this.router.navigate(['/courses']);\n            }\n          });\n        }\n    } else {\n        this.courseForm.markAllAsTouched();\n    }\n    }\n  }\n  // Use the names `title`, `description`, `author`, 'authors' (for authors list), `duration` for the form controls.\n}\n","<!-- Replace ::text:: with your code -->\n<h2>Create / Edit Course</h2>\n<form [formGroup]=\"courseForm\">\n  <div class=\"app-plate\">\n    <div class=\"course\">\n      <h3>Main Info</h3>\n      <div class=\"form__control\">\n        <label for=\"title\">Title</label>\n        <!--Use the name `title` for the form control.-->\n        <input type=\"text\" id=\"title\" placeholder=\"Input text\" formControlName=\"title\"/>\n        <span *ngIf=\"courseForm.get('title')?.invalid && courseForm.get('title')?.touched\" id=\"titleErrorMessage\" class=\"text-danger\">Title is required and must be at least 2 characters.</span>\n      </div>\n      <div class=\"form__control\">\n        <label for=\"description\">Description</label>\n        <!--Use the name `description` for the form control.-->\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          placeholder=\"Input text\"\n          rows=\"4\"\n          cols=\"5\"\n          formControlName=\"description\"\n        ></textarea>\n        <span *ngIf=\"courseForm.get('description')?.invalid && courseForm.get('description')?.touched\" id=\"descriptionErrorMessage\" class=\"text-danger\">Description is required and must be at least 2 characters.</span>\n      </div>\n      <div class=\"separator\"></div>\n      <h3>Duration</h3>\n      <div class=\"form__control\">\n        <div class=\"course__flex\">\n          <!--Use the name `duration` for the form array.-->\n          <input type=\"number\" id=\"duration\" placeholder=\"Input duration\" formControlName=\"duration\"/>\n          <div class=\"course__duration\">\n            {{ courseForm.get('duration')?.value | duration }} hours\n          </div>\n        </div>\n        <span *ngIf=\"courseForm.get('duration')?.invalid && courseForm.get('duration')?.touched\" id=\"durationErrorMessage\" class=\"text-danger\">Duration is required and must be greater than 0.</span>\n      </div>\n      <div class=\"separator\"></div>\n      <h3>Authors</h3>\n      <div class=\"form__control\">\n        <div class=\"course__flex\">\n          <!--Use the name `author` for the form control.-->\n          <input type=\"text\" id=\"author\" placeholder=\"Input Author Name\" formControlName=\"author\"/>\n          <app-button id=\"createAuthor\" buttonText=\"Create author\" (click)=\"createAuthor()\"></app-button>\n        </div>\n        <span *ngIf=\"courseForm.get('author')?.invalid && courseForm.get('author')?.touched\" id=\"authorErrorMessage\" class=\"text-danger\">New author should contain at least 2 characters and only Latin letters or numbers.</span>\n      </div>\n      <div class=\"available__authors\">\n        <h4>Authors List</h4>\n        <ul>\n          <li *ngFor=\"let author of availableAuthors\">\n            {{ author.name }}\n            <app-button [iconName]=\"['fas', 'plus']\" (click)=\"addAuthorToCourse(author)\"></app-button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"course__authors\">\n        <h4>Course Authors:</h4>\n        <!--Use the name `authors` for the form array.-->\n        <ul>\n          <li *ngFor=\"let author of authors.controls; let i = index\">\n            {{ author.value.name }}\n            <app-button [iconName]=\"['fas', 'trash-can']\" (click)=\"removeAuthorFromCourse(i)\"></app-button>\n          </li>\n        </ul>\n        <p *ngIf=\"authors.length === 0\">Author list is empty</p>\n      </div>\n      <div class=\"form__action course-form__buttons\">\n        <app-button buttonText=\"cancel\" routerLink=\"/courses\"></app-button>\n        <app-button [buttonText]=\"buttonText\" (click)=\"onSubmit()\"></app-button>\n      </div>\n    </div>\n  </div>\n</form>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}